(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{384:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),i=n(184),s=n(82),r=n(185);n(608);var l=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return a.handleChange=a.handleChange.bind(a),a.savePost=a.savePost.bind(a),a.props.post?(a.state=a.props.post,a.state.uuid=i.tp.user.uuid,void 0!==a.state.origin&&(alert("invalid access!"),history.back())):i.tp.api.getPost(a.props.postKey).then(function(t){a.state=t.post,a.state.uuid=i.tp.user.uuid,i.tp.store.dispatch(i.tp.action.addPost(t.post))}),a.contextPath=a.props.context?"/"+a.props.context:"",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Component),a(e,[{key:"shouldComponentUpdate",value:function(t,e){return!0}},{key:"componentDidMount",value:function(){document.title=(this.props.context||"Anony")+" - "+i.tp.thispage}},{key:"getValidationState",value:function(){}},{key:"handleChange",value:function(t){var e={};e[t.target.id]="checkbox"===t.target.getAttribute("type")?t.target.checked:t.target.value,this.setState(e)}},{key:"savePost",value:function(){var t=this;if(""!==this.state.content){var e={key:this.state.key,title:""===this.state.title?this.state.content.trim().substr(0,17):this.state.title.trim(),writer:this.state.writer.trim(),content:this.state.content.trim(),date:Date.now(),isPrivate:this.state.isPrivate,isMarkdown:this.state.isMarkdown,hasComment:this.state.hasComment,viewCnt:this.state.viewCnt,uuid:i.tp.user.uuid,context:this.state.context};i.tp.api.updatePost(e).then(function(n){"Fail"!==n.status?(console.log("# "+n.message),i.tp.view.App.state.data.posts.length>0&&i.tp.store.dispatch(i.tp.action.updatePost(e)),i.tp.setUser({writer:e.writer}),t.props.history.push(t.contextPath+"/post/"+e.key)):alert(JSON.stringify(n,null,2))})}else alert("내용을 입력하세요")}},{key:"render",value:function(){if(console.log("Write 렌더링.."),!this.state)return o.default.createElement("div",null);var t={height:i.tp.isDesktop()?window.innerHeight-170+"px":window.innerHeight-400+"px",fontSize:this.state.isMarkdown?"15px":"20px"};return o.default.createElement("div",{className:"edit"},o.default.createElement("div",{className:"context"},this.props.context||"Anony"),o.default.createElement(r.FormGroup,{controlId:"title",validationState:this.getValidationState()},o.default.createElement(r.FormControl,{type:"text",autoFocus:!0,value:this.state.title,onChange:this.handleChange,placeholder:"Title.."}),o.default.createElement(r.FormControl.Feedback,null)),o.default.createElement(r.FormGroup,{controlId:"writer"},o.default.createElement(r.FormControl,{type:"text",className:"writer",value:this.state.writer,onChange:this.handleChange,placeholder:"Writer.."}),o.default.createElement(r.Checkbox,{onChange:this.handleChange,id:"isMarkdown",checked:this.state.isMarkdown},"Markdown"),o.default.createElement(r.Checkbox,{onChange:this.handleChange,id:"isPrivate",checked:this.state.isPrivate},"Private"),o.default.createElement(r.Checkbox,{onChange:this.handleChange,id:"hasComment",checked:this.state.hasComment},"Comment")),o.default.createElement(r.FormGroup,{controlId:"content"},o.default.createElement(r.FormControl,{style:t,value:this.state.content,onChange:this.handleChange,componentClass:"textarea",placeholder:"Content.."})),o.default.createElement(r.Button,{bsStyle:"success",onClick:this.savePost},"Save"),o.default.createElement(s.Link,{to:this.contextPath+"/post/"+this.state.key},o.default.createElement(r.Button,{className:"write-cancel-btn",bsStyle:"success"},"Cancel")))}}]),e}();e.default=l},608:function(t,e,n){var a=n(609);"string"==typeof a&&(a=[[t.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(125)(a,o);a.locals&&(t.exports=a.locals)},609:function(t,e,n){(t.exports=n(124)(!1)).push([t.i,'.edit {\n  margin: 20px; }\n  .edit div {\n    margin-bottom: 5px; }\n  .edit .writer {\n    display: inline-block;\n    width: calc(100% - 265px); }\n  .edit .checkbox {\n    margin: 0px 0px 0px 10px;\n    vertical-align: text-bottom;\n    display: inline-block; }\n    .edit .checkbox input[type="checkbox"] {\n      -webkit-appearance: checkbox; }\n  .edit .content {\n    font-size: 20px;\n    height: 210px; }\n  .edit input {\n    font-size: 20px; }\n  .edit .write-cancel-btn {\n    margin-left: 3px; }\n',""])}}]);