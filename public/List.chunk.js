(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["List"],{

/***/ "./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/pages/List.scss":
/*!************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/pages/List.scss ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \"@charset \\\"UTF-8\\\";\\n/* List component */\\n.list {\\n  margin: 0px; }\\n  .list .header {\\n    display: flex;\\n    flex-wrap: wrap;\\n    color: #aaa;\\n    background-color: #fff;\\n    padding: 3px 15px 3px 10px;\\n    margin-bottom: 4px;\\n    border-bottom: 1px solid #eee; }\\n    .list .header .logo {\\n      min-width: 110px; }\\n      .list .header .logo img {\\n        position: absolute;\\n        width: 110px;\\n        cursor: pointer;\\n        filter: grayscale(100%);\\n        opacity: 0.4; }\\n    .list .header .search {\\n      text-align: left;\\n      margin-right: 15px;\\n      flex: 1;\\n      display: flex; }\\n    .list .header .channel {\\n      margin-left: 5px;\\n      display: inline-block;\\n      font-size: 16px; }\\n    .list .header .status {\\n      margin-left: 5px;\\n      display: inline-block;\\n      font-size: 16px; }\\n    .list .header .menu-title {\\n      text-align: right; }\\n      .list .header .menu-title .menu {\\n        display: inline-block;\\n        font-size: 16px;\\n        cursor: pointer; }\\n      .list .header .menu-title .uuid {\\n        display: inline-block;\\n        font-size: 16px;\\n        cursor: pointer; }\\n  .list .writeBtn {\\n    padding-right: 15px;\\n    position: fixed;\\n    bottom: 15px;\\n    width: 100%;\\n    max-width: 800px;\\n    text-align: right;\\n    opacity: 0.7; }\\n    .list .writeBtn .btn {\\n      padding-top: 5px;\\n      padding-bottom: 5px;\\n      padding-left: 7px;\\n      padding-right: 10px; }\\n  .list .backBtn {\\n    background-color: #fff;\\n    padding-left: 15px;\\n    padding-top: 10px; }\\n\\n/* On screens that are 992px or less, set the background color to blue */\\n@media screen and (max-width: 400px) {\\n  .list .header .search {\\n    order: 1; }\\n  .logo {\\n    flex: 1; }\\n  div.header > div.search > div.ipt-wrapper {\\n    max-width: initial; } }\\n\\n/* myChannels 스타일 */\\n.channels-wrappter {\\n  position: fixed;\\n  left: 20px;\\n  top: 50px; }\\n\\n@media screen and (max-width: 1090px) {\\n  .channels-wrappter .my-channels {\\n    display: none; } }\\n\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack:///./src/pages/List.scss?./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js");

/***/ }),

/***/ "./src/pages/List.js":
/*!***************************!*\
  !*** ./src/pages/List.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(/*! react-bootstrap */ \"./node_modules/react-bootstrap/es/index.js\");\n\nvar _components = __webpack_require__(/*! ../components */ \"./src/components/index.js\");\n\nvar _tp = __webpack_require__(/*! ../tp.js */ \"./src/tp.js\");\n\nvar _reactRouterDom = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/es/index.js\");\n\nvar _nprogress = __webpack_require__(/*! nprogress */ \"./node_modules/nprogress/nprogress.js\");\n\nvar _nprogress2 = _interopRequireDefault(_nprogress);\n\nvar _util = __webpack_require__(/*! ../../com/util */ \"./com/util.js\");\n\nvar _util2 = _interopRequireDefault(_util);\n\n__webpack_require__(/*! ./List.scss */ \"./src/pages/List.scss\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar List = function (_React$Component) {\n    _inherits(List, _React$Component);\n\n    function List(props) {\n        _classCallCheck(this, List);\n\n        var _this = _possibleConstructorReturn(this, (List.__proto__ || Object.getPrototypeOf(List)).call(this, props));\n\n        _this.logoClick = _this.logoClick.bind(_this);\n\n        _this.state = {\n            channels: _tp.tp.store.getState().data.channels,\n            comments: [],\n            posts: _tp.tp.store.getState().data.posts.filter(function (p) {\n                return p.origin === undefined;\n            }),\n            menuClicked: false\n        };\n\n        _tp.tp.view.List = _this;\n\n        if (_this.props.context && _this.props.context.length > _tp.tp.MAXCONTEXTLEN) {\n            alert(\"\\uCC44\\uB110\\uC774\\uB984\\uC740 \\uCD5C\\uB300 \" + _tp.tp.MAXCONTEXTLEN + \"\\uC790 \\uAE4C\\uC9C0 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4\");\n            history.back();\n            return _possibleConstructorReturn(_this);\n        }\n\n        _tp.tp.context = _this.props.context && _this.props.context.length <= _tp.tp.MAXCONTEXTLEN ? _this.props.context : \"public\";\n\n        //if(tp.view.App.state.data.posts.length <= 1 && tp.store.getState().view.search === \"\"){\n        if ( // 처음부터 글쓰기로 글을 생성하고 들어온 경우\n        _tp.tp.store.getState().data.posts.filter(function (p) {\n            return p.origin === undefined;\n        }).length <= 1 && _tp.tp.store.getState().view.search === \"\" ||\n        // 글수정화면에서 context를 수정한 경우(posts에 context 가 2개 이상 포함된 경우)\n        _tp.tp.store.getState().data.posts.map(function (p) {\n            return p.context;\n        }).filter(function (v, i, a) {\n            return a.indexOf(v) === i;\n        }).length > 1) {\n            _tp.tp.api.getPosts({ idx: 0, cnt: 10, context: _tp.tp.context }).then(_tp.tp.checkStatus).then(function (res) {\n                return _tp.tp.store.dispatch(_tp.tp.action.setPosts(res.posts));\n            });\n        } else {}\n        // 이전에 들고있던 글목록이 있다면 굳이 새로 서버로 요청을 다시 보낼 필요가 없음..\n\n\n        // 이후 App 가 스토어 상태를 구독하도록 설정\n        _this.unsubscribe = _tp.tp.store.subscribe(function () {\n            // console.log(\"List가 store 상태 변경 노티 받음\")\n            _this.setState(_tp.tp.store.getState().data);\n        });\n        return _this;\n    }\n\n    _createClass(List, [{\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n            //console.log(\"# List unsubscribe store..\");\n            this.unsubscribe();\n        }\n    }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            document.title = (_tp.tp.context || \"Anony\") + \" - \" + _tp.tp.thispage;\n            _tp.tp.$m.scrollTo(0, _tp.tp.scrollTop); // 이전 스크롤 위치로 복원\n        }\n    }, {\n        key: \"logoClick\",\n        value: function logoClick() {\n            // 기존내용 초기화\n            _tp.tp.store.dispatch(_tp.tp.action.setSearch(\"\"));\n            //tp.store.dispatch(tp.action.initPosts());\n            _tp.tp.isScrollLast = false;\n\n            // 다시 세팅\n            _tp.tp.api.getPosts({ idx: 0, cnt: 10, context: _tp.tp.context }).then(_tp.tp.checkStatus)\n            //.then(res => tp.store.dispatch(tp.action.addPosts(res.posts)));\n            .then(function (res) {\n                return _tp.tp.store.dispatch(_tp.tp.action.setPosts(res.posts));\n            });\n        }\n    }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            if (this.state.posts !== nextState.posts) {\n                return true;\n            }if (this.state.channels !== nextState.channels) {\n                return true;\n            }if (this.state.menuClicked !== nextState.menuClicked) {\n                return true;\n            } else {\n                console.log(\"List 렌더링 안함 \");\n                return false;\n            }\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this2 = this;\n\n            //let title = tp.store.getState().view.uuid + (tp.context ? (\" /\" + tp.context) : \"\") ;\n            var title = _tp.tp.user.uuid + (_tp.tp.context ? \" /\" + _tp.tp.context : \"\");\n            var uuid = _tp.tp.user.uuid;\n            var channel = _tp.tp.context ? \" /\" + _tp.tp.context : \"\";\n\n            var status = \"\";\n            var search = _tp.tp.store.getState().view.search;\n\n            if (search) {\n                status = \" > \" + search + \"'s result\";\n            }\n\n            //console.log(\"@@222 \" + this.state.myChannels)\n\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"list\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"header\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"logo\" },\n                        _react2.default.createElement(\"img\", { src: \"/image/logo_transparent.png\", onClick: this.logoClick })\n                    ),\n                    _react2.default.createElement(_components.Search, { context: _tp.tp.context }),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"menu-title\" },\n                        _react2.default.createElement(\"div\", { className: \"icon-menu-1 menu\", onClick: function onClick() {\n                                return _this2.setState({ menuClicked: true });\n                            } }),\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"uuid\" },\n                            uuid\n                        )\n                    ),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"channel\" },\n                        channel\n                    )\n                ),\n                this.state.posts.map(function (post) {\n                    return _react2.default.createElement(_components.Excerpt, { history: _this2.props.history, key: post.key, post: post, context: _tp.tp.context });\n                }),\n                _react2.default.createElement(_components.ListLoader, null),\n                _tp.tp.store.getState().view.search !== \"\" && _react2.default.createElement(\n                    \"div\",\n                    { className: \"backBtn\" },\n                    _react2.default.createElement(\n                        _reactBootstrap.Button,\n                        { bsStyle: \"success\", onClick: this.logoClick },\n                        \"Back\"\n                    )\n                ),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"writeBtn\" },\n                    _react2.default.createElement(\n                        _reactRouterDom.Link,\n                        { to: \"/\" + _tp.tp.context + \"/write\" },\n                        _react2.default.createElement(\n                            _reactBootstrap.Button,\n                            { bsStyle: \"success\" },\n                            _react2.default.createElement(\"i\", { className: \"icon-doc-new\" }),\n                            \"Write\"\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"channels-wrappter\" },\n                    _react2.default.createElement(_components.MyChannels, null)\n                ),\n                this.state.menuClicked && _react2.default.createElement(_components.MenuBoard, null)\n            );\n        }\n    }]);\n\n    return List;\n}(_react2.default.Component);\n\nvar _default = List;\nexports.default = _default;\n\n\ndocument.body.onscroll = function () {\n    var PAGEROWS = 10;\n\n    if (_tp.tp.thispage !== \"List\") {\n        // 목록화면이 아니면 리턴  \n        return;\n    }\n    if (_tp.tp.view.ListLoader.state.loading) {\n        // 데이터 로딩중이면 리턴\n        return;\n    }\n\n    // 현재 목록화면 scrollTop 의 값\n    var scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\n\n    // 현재 스크롤 값을 전역변수에 저장\n    _tp.tp.scrollTop = scrollTop;\n\n    if (_tp.tp.isScrollLast) return;\n    // 아직 모든 글이 로드된 상태가 아니라면 스크롤이 아래까지 내려왔을 때 다음 글 10개 로드\n\n    //현재문서의 높이\n    var scrollHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n    //현재 화면 높이 값\n    var clientHeight = document.documentElement.clientHeight;\n\n    console.log(\"@@ scrollTop : \" + scrollTop);\n    console.log(\"clientHeight : \" + clientHeight);\n    console.log(\"scrollHeight : \" + scrollHeight);\n\n    if (scrollTop + clientHeight == scrollHeight || // 일반적인 경우(데스크탑: 크롬/파폭, 아이폰: 사파리)\n\n    //(tp.isMobileChrome() && (scrollTop + clientHeight > scrollHeight - 10))   // 모바일 크롬(55는 위에 statusbar 의 높이 때문인건가)\n    _tp.tp.isMobileChrome() && scrollTop + clientHeight > scrollHeight - 57 // 모바일 크롬(55는 위에 statusbar 의 높이 때문인건가)\n    ) {\n            //스크롤이 마지막일때\n            console.log(\"@@ 다음 페이지 호출~\");\n\n            /*\n            * 18.09.19 min9nim\n            * 아래와 같이 분기 처리하면 데스크탑 크롬에서 스크롤이 마지막에 닿고나서 요청이 여러번 한꺼번에 올라가는 문제 발생\n            * //if ((scrollTop + clientHeight) >= scrollHeight-55) { \n            */\n\n            //console.log(\"scrollTop + clientHeight = \" + (scrollTop + clientHeight));\n            //console.log(\"scrollHeight = \" + scrollHeight);\n\n            _nprogress2.default.start();\n            (0, _util2.default)(\"#nprogress .spinner\").css(\"top\", \"95%\");\n            _tp.tp.view.ListLoader.setState({ loading: true });\n            _tp.tp.api.getPosts({\n                idx: _tp.tp.store.getState().data.posts.filter(function (p) {\n                    return p.origin === undefined;\n                }).length,\n                cnt: PAGEROWS,\n                search: _tp.tp.store.getState().view.search,\n                hideProgress: true,\n                context: _tp.tp.context\n            }).then(function (res) {\n                _tp.tp.view.ListLoader.setState({ loading: false });\n                _tp.tp.store.dispatch(_tp.tp.action.scrollEnd(res.posts));\n                if (res.posts.length < PAGEROWS) {\n                    //console.log(\"Scroll has touched bottom\")\n                    _tp.tp.isScrollLast = true;\n                    return;\n                }\n            });\n        }\n};\n;\n\nvar _temp = function () {\n    if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n        return;\n    }\n\n    __REACT_HOT_LOADER__.register(List, \"List\", \"/Users/mac9/project/side-p/anony/src/pages/List.js\");\n\n    __REACT_HOT_LOADER__.register(_default, \"default\", \"/Users/mac9/project/side-p/anony/src/pages/List.js\");\n}();\n\n;\n\n//# sourceURL=webpack:///./src/pages/List.js?");

/***/ }),

/***/ "./src/pages/List.scss":
/*!*****************************!*\
  !*** ./src/pages/List.scss ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar content = __webpack_require__(/*! !../../node_modules/css-loader!../../node_modules/sass-loader/lib/loader.js!./List.scss */ \"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/pages/List.scss\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../node_modules/style-loader/lib/addStyles.js */ \"./node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(true) {\n\tmodule.hot.accept(/*! !../../node_modules/css-loader!../../node_modules/sass-loader/lib/loader.js!./List.scss */ \"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/pages/List.scss\", function() {\n\t\tvar newContent = __webpack_require__(/*! !../../node_modules/css-loader!../../node_modules/sass-loader/lib/loader.js!./List.scss */ \"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/pages/List.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.i, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}\n\n//# sourceURL=webpack:///./src/pages/List.scss?");

/***/ })

}]);