(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{400:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=u(n(1)),i=n(29),s=n(30),r=n(20),l=n(50),c=u(n(90)),p=u(n(89));function u(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}n(412);var f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.logoClick=n.logoClick.bind(n),n.state={channels:r.tp.store.getState().data.channels,comments:[],posts:r.tp.store.getState().data.posts.filter(function(t){return void 0===t.origin}),menuClicked:!1},r.tp.view.List=n,n.props.context&&n.props.context.length>r.tp.MAXCONTEXTLEN?(alert("채널이름은 최대 "+r.tp.MAXCONTEXTLEN+"자 까지 가능합니다"),history.back(),d(n)):(r.tp.context=n.props.context&&n.props.context.length<=r.tp.MAXCONTEXTLEN?n.props.context:"public",(r.tp.store.getState().data.posts.filter(function(t){return void 0===t.origin}).length<=1&&""===r.tp.store.getState().view.search||r.tp.store.getState().data.posts.map(function(t){return t.context}).filter(function(t,e,n){return n.indexOf(t)===e}).length>1)&&r.tp.api.getPosts({idx:0,cnt:10,context:r.tp.context}).then(r.tp.checkStatus).then(function(t){return r.tp.store.dispatch(r.tp.action.setPosts(t.posts))}),n.unsubscribe=r.tp.store.subscribe(function(){n.setState(r.tp.store.getState().data)}),n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Component),o(e,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"componentDidMount",value:function(){document.title=(r.tp.context||"Anony")+" - "+r.tp.thispage,r.tp.$m.scrollTo(0,r.tp.scrollTop),0===r.tp.store.getState().data.channels.length&&r.tp.api.myChannels().then(function(t){r.tp.store.dispatch(r.tp.action.myChannels(t.output))})}},{key:"logoClick",value:function(){r.tp.store.dispatch(r.tp.action.setSearch("")),r.tp.isScrollLast=!1,r.tp.api.getPosts({idx:0,cnt:10,context:r.tp.context}).then(r.tp.checkStatus).then(function(t){return r.tp.store.dispatch(r.tp.action.setPosts(t.posts))})}},{key:"shouldComponentUpdate",value:function(t,e){return this.state.posts!==e.posts||(this.state.channels!==e.channels||(this.state.menuClicked!==e.menuClicked||(console.log("List 렌더링 안함 "),!1)))}},{key:"render",value:function(){var t=this,e=(r.tp.user.uuid,r.tp.context&&r.tp.context,r.tp.user.uuid),n=r.tp.context?" /"+r.tp.context:"",o=r.tp.store.getState().view.search;return o&&" > "+o+"'s result",a.default.createElement("div",{className:"list"},a.default.createElement("div",{className:"header"},a.default.createElement("div",{className:"logo"},a.default.createElement("img",{src:"/image/logo_transparent.png",onClick:this.logoClick})),a.default.createElement(s.Search,{context:r.tp.context}),a.default.createElement("div",{className:"menu-title"},a.default.createElement("div",{className:"icon-menu-1 menu",onClick:function(){return t.setState({menuClicked:!0})}}),a.default.createElement("div",{className:"uuid"},e)),a.default.createElement("div",{className:"channel"},n)),this.state.posts.map(function(e){return a.default.createElement(s.Excerpt,{history:t.props.history,key:e.key,post:e,context:r.tp.context})}),a.default.createElement(s.ListLoader,null),""!==r.tp.store.getState().view.search&&a.default.createElement("div",{className:"backBtn"},a.default.createElement(i.Button,{bsStyle:"success",onClick:this.logoClick},"Back")),a.default.createElement("div",{className:"writeBtn"},a.default.createElement(l.Link,{to:"/"+r.tp.context+"/write"},a.default.createElement(i.Button,{bsStyle:"success"},a.default.createElement("i",{className:"icon-doc-new"}),"Write"))),a.default.createElement("div",{className:"channels-wrappter"},a.default.createElement(s.MyChannels,null)),this.state.menuClicked&&a.default.createElement(s.MenuBoard,null))}}]),e}();e.default=f,document.body.onscroll=function(){if("List"===r.tp.thispage&&!r.tp.view.ListLoader.state.loading){var t=Math.max(document.documentElement.scrollTop,document.body.scrollTop);if(r.tp.scrollTop=t,!r.tp.isScrollLast){var e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=document.documentElement.clientHeight;(t+n==e||r.tp.isMobileChrome()&&t+n==e-56)&&(c.default.start(),(0,p.default)("#nprogress .spinner").css("top","95%"),r.tp.view.ListLoader.setState({loading:!0}),r.tp.api.getPosts({idx:r.tp.store.getState().data.posts.filter(function(t){return void 0===t.origin}).length,cnt:10,search:r.tp.store.getState().view.search,hideProgress:!0,context:r.tp.context}).then(function(t){r.tp.view.ListLoader.setState({loading:!1}),r.tp.store.dispatch(r.tp.action.scrollEnd(t.posts)),t.posts.length<10&&(r.tp.isScrollLast=!0)}))}}}},412:function(t,e,n){var o=n(413);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(15)(o,a);o.locals&&(t.exports=o.locals)},413:function(t,e,n){(t.exports=n(14)(!1)).push([t.i,"/* List component */\n.list {\n  margin: 0px; }\n  .list .header {\n    display: flex;\n    flex-wrap: wrap;\n    color: #aaa;\n    background-color: #fff;\n    padding: 3px 15px 3px 10px;\n    margin-bottom: 4px;\n    border-bottom: 1px solid #eee; }\n    .list .header .logo {\n      min-width: 110px; }\n      .list .header .logo img {\n        position: absolute;\n        width: 110px;\n        cursor: pointer;\n        filter: grayscale(100%);\n        opacity: 0.4; }\n    .list .header .search {\n      text-align: left;\n      margin-right: 15px;\n      flex: 1;\n      display: flex; }\n    .list .header .channel {\n      margin-left: 5px;\n      display: inline-block;\n      font-size: 16px; }\n    .list .header .status {\n      margin-left: 5px;\n      display: inline-block;\n      font-size: 16px; }\n    .list .header .menu-title {\n      text-align: right; }\n      .list .header .menu-title .menu {\n        display: inline-block;\n        font-size: 16px;\n        cursor: pointer; }\n      .list .header .menu-title .uuid {\n        display: inline-block;\n        font-size: 16px;\n        cursor: pointer; }\n  .list .writeBtn {\n    padding-right: 15px;\n    position: fixed;\n    bottom: 15px;\n    width: 100%;\n    max-width: 800px;\n    text-align: right;\n    opacity: 0.7; }\n    .list .writeBtn .btn {\n      padding-top: 5px;\n      padding-bottom: 5px;\n      padding-left: 7px;\n      padding-right: 10px; }\n  .list .backBtn {\n    background-color: #fff;\n    padding-left: 15px;\n    padding-top: 10px; }\n  .list .channels-wrappter {\n    position: fixed;\n    left: 20px;\n    top: 50px; }\n\n/* On screens that are 992px or less, set the background color to blue */\n@media screen and (max-width: 400px) {\n  .list .header .search {\n    order: 1; }\n  .logo {\n    flex: 1; }\n  div.header > div.search > div.ipt-wrapper {\n    max-width: initial; } }\n\n@media screen and (max-width: 1090px) {\n  .channels-wrappter .my-channels {\n    display: none; } }\n",""])}}]);