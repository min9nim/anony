(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["PostMenu"],{

/***/ "./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/components/PostMenu.scss":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/components/PostMenu.scss ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \"/* Post component */\\n.postMenu {\\n  float: right;\\n  cursor: pointer;\\n  color: #aaa; }\\n  .postMenu .navi {\\n    font-size: 20px; }\\n    .postMenu .navi div {\\n      font-size: 14px;\\n      display: inline-block;\\n      font-style: italic; }\\n      .postMenu .navi div div {\\n        margin-left: 10px; }\\n\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack:///./src/components/PostMenu.scss?./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js");

/***/ }),

/***/ "./src/components/PostMenu.js":
/*!************************************!*\
  !*** ./src/components/PostMenu.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"./node_modules/react/react.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _tp = __webpack_require__(/*! ../tp */ \"./src/tp.js\");\n\n__webpack_require__(/*! ./PostMenu.scss */ \"./src/components/PostMenu.scss\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PostMenu = function (_React$Component) {\n    _inherits(PostMenu, _React$Component);\n\n    function PostMenu(props) {\n        _classCallCheck(this, PostMenu);\n\n        console.log(\"PostMenu 생성자 호출\");\n\n        var _this = _possibleConstructorReturn(this, (PostMenu.__proto__ || Object.getPrototypeOf(PostMenu)).call(this, props));\n\n        _this.showMenu = _this.showMenu.bind(_this);\n        _this.cancelMenu = _this.cancelMenu.bind(_this);\n        _this.editPost = _this.editPost.bind(_this);\n        _this.deletePost = _this.deletePost.bind(_this);\n        _this.removePost = _this.removePost.bind(_this);\n        _this.restorePost = _this.restorePost.bind(_this);\n        _this.postHistory = _this.postHistory.bind(_this);\n\n        _this.state = {\n            clicked: false\n        };\n        _this.contextPath = _this.props.context ? \"/\" + _this.props.context : \"\";\n\n        return _this;\n    }\n\n    _createClass(PostMenu, [{\n        key: \"deletePost\",\n        value: function deletePost() {\n            var _this2 = this;\n\n            if (!confirm(\"Delete this?\")) return;\n            _tp.tp.api.deletePost({\n                key: this.props.postKey,\n                uuid: _tp.tp.user.uuid\n            }).then(function (res) {\n                if (res.status === \"Fail\") {\n                    alert(res.message);\n                } else {\n                    if (_tp.tp.view.App.state.data.posts.length > 0) _tp.tp.store.dispatch(_tp.tp.action.deletePost(_this2.props.postKey));\n                    //history.back();       // 이걸 사용하면 전혀 다른 사이트로 튈수 있음\n                    //this.props.history.push(\"/list\");\n                    //tp.view.Post.setState({deleted : true});\n                }\n                _this2.cancelMenu();\n            });\n        }\n    }, {\n        key: \"removePost\",\n        value: function removePost() {\n            var _this3 = this;\n\n            if (!confirm(\"Remove this?\")) return;\n            _tp.tp.api.removePost({\n                key: this.props.postKey,\n                uuid: _tp.tp.user.uuid\n            }).then(function (res) {\n                if (res.status === \"Fail\") {\n                    alert(res.message);\n                    _this3.cancelMenu();\n                } else {\n                    //tp.store.dispatch(tp.action.deletePost(this.props.postKey));\n                    _tp.tp.store.dispatch(_tp.tp.action.removePost(function (p) {\n                        return p.key === _this3.props.postKey;\n                    }));\n                    //history.back();       // 이걸 사용하면 전혀 다른 사이트로 튈수 있음\n                    _this3.props.history.push(_this3.contextPath + \"/list\");\n                    //tp.view.Post.setState({deleted : true});\n                }\n            });\n        }\n    }, {\n        key: \"restorePost\",\n        value: function restorePost() {\n            var _this4 = this;\n\n            if (!confirm(\"Restore this?\")) return;\n\n            _tp.tp.api.restorePost({\n                key: this.props.postKey,\n                uuid: _tp.tp.user.uuid\n            }).then(function (res) {\n                if (res.status === \"Fail\") {\n                    alert(JSON.stringify(res, null, 2));\n                } else {\n                    //tp.store.dispatch(tp.action.deletePost(this.props.postKey));\n                    _tp.tp.store.dispatch(_tp.tp.action.restorePost(_this4.props.postKey));\n                    //history.back();       // 이걸 사용하면 전혀 다른 사이트로 튈수 있음\n                    //this.props.history.push(\"/list\");\n                    //tp.view.Post.setState({deleted : true});\n                }\n                _this4.cancelMenu();\n            });\n        }\n    }, {\n        key: \"editPost\",\n        value: function editPost() {\n            var _this5 = this;\n\n            _tp.tp.api.authPost({\n                key: this.props.postKey,\n                uuid: _tp.tp.user.uuid\n            }).then(function (res) {\n                if (res.status === \"Success\") {\n                    _this5.props.history.push(_this5.contextPath + \"/edit/\" + _this5.props.postKey);\n                } else {\n                    alert(res.message);\n                    _this5.cancelMenu();\n                }\n            });\n        }\n    }, {\n        key: \"postHistory\",\n        value: function postHistory() {\n            var _this6 = this;\n\n            // 기존 세팅된 수정내역 초기화하고\n            _tp.tp.store.dispatch(_tp.tp.action.removePost(function (p) {\n                return p.origin === _this6.props.postKey;\n            }));\n\n            // 최신 상태로 새로 세팅\n            _tp.tp.api.getPostHistory(this.props.postKey).then(function (res) {\n                if (res.posts.length > 0) {\n                    //tp.store.dispatch(tp.action.setPostHistory(res.posts));\n                    _tp.tp.store.dispatch(_tp.tp.action.addPosts(res.posts));\n                    _this6.props.history.push(_this6.contextPath + \"/postHistory/\" + _this6.props.postKey);\n                } else {\n                    alert(\"Have no changes\");\n                    _this6.cancelMenu();\n                }\n            });\n        }\n    }, {\n        key: \"cancelMenu\",\n        value: function cancelMenu() {\n            this.setState({\n                clicked: false\n            });\n        }\n    }, {\n        key: \"showMenu\",\n        value: function showMenu() {\n            this.setState({\n                clicked: true\n            });\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            console.log(\"PostMenu 렌더링\");\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"postMenu\" },\n                this.state.clicked ? _react2.default.createElement(\n                    \"div\",\n                    { className: \"navi\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { onClick: this.postHistory },\n                        \"History\"\n                    ),\n                    this.props.postDeleted ? _react2.default.createElement(\n                        \"div\",\n                        null,\n                        _react2.default.createElement(\n                            \"div\",\n                            { onClick: this.removePost },\n                            \"Remove\"\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { onClick: this.restorePost },\n                            \"Restore\"\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { onClick: this.cancelMenu },\n                            \"Cancel\"\n                        )\n                    ) : _react2.default.createElement(\n                        \"div\",\n                        null,\n                        _react2.default.createElement(\n                            \"div\",\n                            { onClick: this.editPost },\n                            \"Edit\"\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { onClick: this.deletePost },\n                            \"Delete\"\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { onClick: this.cancelMenu },\n                            \"Cancel\"\n                        )\n                    )\n                ) : _react2.default.createElement(\n                    \"div\",\n                    { className: \"navi\", onClick: this.showMenu },\n                    \"...\"\n                )\n            );\n        }\n    }]);\n\n    return PostMenu;\n}(_react2.default.Component);\n\nvar _default = PostMenu;\nexports.default = _default;\n;\n\nvar _temp = function () {\n    if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n        return;\n    }\n\n    __REACT_HOT_LOADER__.register(PostMenu, \"PostMenu\", \"/Users/songmingu/Documents/project/anony/src/components/PostMenu.js\");\n\n    __REACT_HOT_LOADER__.register(_default, \"default\", \"/Users/songmingu/Documents/project/anony/src/components/PostMenu.js\");\n}();\n\n;\n\n//# sourceURL=webpack:///./src/components/PostMenu.js?");

/***/ }),

/***/ "./src/components/PostMenu.scss":
/*!**************************************!*\
  !*** ./src/components/PostMenu.scss ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar content = __webpack_require__(/*! !../../node_modules/css-loader!../../node_modules/sass-loader/lib/loader.js!./PostMenu.scss */ \"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/components/PostMenu.scss\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../node_modules/style-loader/lib/addStyles.js */ \"./node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(true) {\n\tmodule.hot.accept(/*! !../../node_modules/css-loader!../../node_modules/sass-loader/lib/loader.js!./PostMenu.scss */ \"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/components/PostMenu.scss\", function() {\n\t\tvar newContent = __webpack_require__(/*! !../../node_modules/css-loader!../../node_modules/sass-loader/lib/loader.js!./PostMenu.scss */ \"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/components/PostMenu.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.i, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}\n\n//# sourceURL=webpack:///./src/components/PostMenu.scss?");

/***/ })

}]);