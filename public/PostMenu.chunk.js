(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{243:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(o(1)),i=o(189);o(244);var r=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("PostMenu 생성자 호출");var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.showMenu=o.showMenu.bind(o),o.cancelMenu=o.cancelMenu.bind(o),o.editPost=o.editPost.bind(o),o.deletePost=o.deletePost.bind(o),o.removePost=o.removePost.bind(o),o.restorePost=o.restorePost.bind(o),o.postHistory=o.postHistory.bind(o),o.state={clicked:!1},o.contextPath=o.props.context?"/"+o.props.context:"",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Component),n(e,[{key:"deletePost",value:function(){var t=this;confirm("Delete this?")&&i.tp.api.deletePost({key:this.props.postKey,uuid:i.tp.user.uuid}).then(function(e){"Fail"===e.status?alert(e.message):i.tp.view.App.state.data.posts.length>0&&i.tp.store.dispatch(i.tp.action.deletePost(t.props.postKey)),t.cancelMenu()})}},{key:"removePost",value:function(){var t=this;confirm("Remove this?")&&i.tp.api.removePost({key:this.props.postKey,uuid:i.tp.user.uuid}).then(function(e){"Fail"===e.status?(alert(e.message),t.cancelMenu()):(i.tp.store.dispatch(i.tp.action.removePost(function(e){return e.key===t.props.postKey})),t.props.history.push(t.contextPath+"/list"))})}},{key:"restorePost",value:function(){var t=this;confirm("Restore this?")&&i.tp.api.restorePost({key:this.props.postKey,uuid:i.tp.user.uuid}).then(function(e){"Fail"===e.status?alert(JSON.stringify(e,null,2)):i.tp.store.dispatch(i.tp.action.restorePost(t.props.postKey)),t.cancelMenu()})}},{key:"editPost",value:function(){var t=this;i.tp.api.authPost({key:this.props.postKey,uuid:i.tp.user.uuid}).then(function(e){"Success"===e.status?t.props.history.push(t.contextPath+"/edit/"+t.props.postKey):(alert(e.message),t.cancelMenu())})}},{key:"postHistory",value:function(){var t=this;i.tp.store.dispatch(i.tp.action.removePost(function(e){return e.origin===t.props.postKey})),i.tp.api.getPostHistory(this.props.postKey).then(function(e){e.posts.length>0?(i.tp.store.dispatch(i.tp.action.addPosts(e.posts)),t.props.history.push(t.contextPath+"/postHistory/"+t.props.postKey)):(alert("Have no changes"),t.cancelMenu())})}},{key:"cancelMenu",value:function(){this.setState({clicked:!1})}},{key:"showMenu",value:function(){this.setState({clicked:!0})}},{key:"render",value:function(){return console.log("PostMenu 렌더링"),s.default.createElement("div",{className:"postMenu"},this.state.clicked?s.default.createElement("div",{className:"navi"},s.default.createElement("div",{onClick:this.postHistory},"History"),this.props.postDeleted?s.default.createElement("div",null,s.default.createElement("div",{onClick:this.removePost},"Remove"),s.default.createElement("div",{onClick:this.restorePost},"Restore"),s.default.createElement("div",{onClick:this.cancelMenu},"Cancel")):s.default.createElement("div",null,s.default.createElement("div",{onClick:this.editPost},"Edit"),s.default.createElement("div",{onClick:this.deletePost},"Delete"),s.default.createElement("div",{onClick:this.cancelMenu},"Cancel"))):s.default.createElement("div",{className:"navi",onClick:this.showMenu},"..."))}}]),e}();e.default=r},244:function(t,e,o){var n=o(245);"string"==typeof n&&(n=[[t.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};o(182)(n,s);n.locals&&(t.exports=n.locals)},245:function(t,e,o){(t.exports=o(181)(!1)).push([t.i,"/* Post component */\n.postMenu {\n  float: right;\n  cursor: pointer;\n  color: #aaa; }\n  .postMenu .navi {\n    font-size: 20px; }\n    .postMenu .navi div {\n      font-size: 14px;\n      display: inline-block;\n      font-style: italic; }\n      .postMenu .navi div div {\n        margin-left: 10px; }\n",""])}}]);