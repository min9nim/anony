(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{453:function(t,e,i){var n=i(17),o=i(454);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1},r=(n(o,a),o.locals?o.locals:{});t.exports=r},454:function(t,e,i){(e=i(18)(!1)).push([t.i,'.write{margin:20px;color:#666}.write div{margin-bottom:initial}.write .form_title{position:relative;display:inline-block;width:100%}.write .form_title input{padding-right:12px}.write .form_title .delete{font-size:15px;font-weight:bold;position:absolute;display:inline;color:#999;top:8px;right:5px;cursor:pointer}.write .form_writer{position:relative}.write .form_writer .writer{display:inline-block;width:calc(100% - 90px);margin-right:5px}.write .form_writer .delete{font-size:15px;font-weight:bold;position:absolute;display:inline;color:#999;top:8px;left:calc(100% - 116px);cursor:pointer}.write .options{display:inline-block;margin-left:10px;margin-bottom:6px;cursor:pointer}.write .options:hover{transform:scale(1.05);-webkit-transform:scale(1.05)}.write .form_context{position:relative;display:inline-block;width:calc(100% - 210px);margin-right:5px}.write .form_context .context{display:inline-block;width:100%}.write .form_context .delete{font-size:15px;font-weight:bold;position:absolute;display:inline;color:#999;top:8px;left:calc(100% - 25px);cursor:pointer}.write .form_uuid{display:inline-block;position:relative}.write .form_uuid .uuid{display:inline-block;width:200px;margin-right:5px}.write .form_uuid .group_icon{position:absolute;left:153px;top:7px}.write .form_uuid .group_icon .form-control-feedback{position:relative;display:inline;margin-right:3px}.write .form_uuid .group_icon .delete{font-size:15px;font-weight:bold;display:inline;color:#999;cursor:pointer;margin-right:3px}.write .form_uuid .group_icon .refresh{font-size:15px;font-weight:bold;display:inline;color:#999;cursor:pointer}.write .form_chk{margin-bottom:3px}.write .form_chk .checkbox{margin:0px 10px 0px 5px;vertical-align:text-bottom;display:inline-block}.write .form_chk .checkbox input[type="checkbox"]{-webkit-appearance:checkbox}.write input{font-size:18px}.write .write-cancel-btn{margin-left:3px}.write .form-control{color:#777;margin-bottom:5px}.write .btn{padding-top:2px;padding-bottom:2px;padding-left:2px;padding-right:8px}.write .help-wrapper{text-align:right}.write .help-wrapper .help{display:inline}\n',""]),t.exports=e},637:function(t,e,i){"use strict";i.r(e),i.d(e,"default",function(){return f});var n=i(0),a=i.n(n),o=i(26),r=i.n(o),s=i(8),l=i(12);i(453);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(a){return function(){var t,e,i,n=h(a);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var o=h(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return e=this,!(i=t)||"object"!==c(i)&&"function"!=typeof i?d(e):i}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(o,a.a.Component);var t,e,i,n=p(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,t)).handleChange=e.handleChange.bind(d(e)),e.savePost=e.savePost.bind(d(e)),e.cancel=e.cancel.bind(d(e)),e.refreshUuid=e.refreshUuid.bind(d(e)),e.deleteUuid=e.deleteUuid.bind(d(e)),e.deleteContext=e.deleteContext.bind(d(e)),e.deleteTitle=e.deleteTitle.bind(d(e)),e.deleteWriter=e.deleteWriter.bind(d(e)),e.toggleAdvancedOpt=e.toggleAdvancedOpt.bind(d(e)),e.state={key:"",title:"",writer:s.a.user.writer,content:"",date:"",isPrivate:!1,isMarkdown:void 0!==s.a.user.isMarkdown&&s.a.user.isMarkdown,hasComment:void 0===s.a.user.hasComment||s.a.user.hasComment,uuid:s.a.user.uuid,context:e.props.context?e.props.context:"public",optClicked:!1,autoTitle:"edit"!==e.props.type},"edit"===e.props.type&&e.initializeInEdit(),e}return t=o,(e=[{key:"initializeInEdit",value:function(){var e=this;if(!(0<s.a.store.getState().data.posts.length))return alert("Invalid access"),void history.back();this.state=s.a.store.getState().data.posts.find(function(t){return t.key===e.props.postKey}),this.state.uuid=s.a.user.uuid,this.unsubscribe=s.a.store.subscribe(function(){""===e.state.key&&e.setState(s.a.store.getState().data.posts.find(function(t){return t.key===e.props.postKey}))})}},{key:"componentWillUnmount",value:function(){"edit"===this.props.type&&this.unsubscribe&&this.unsubscribe()}},{key:"shouldComponentUpdate",value:function(t,e){return"edit"===t.type&&void 0!==e.origin?(alert("Invalid access!"),t.history.push("/public/list"),!1):e!==this.state}},{key:"getValidationState",value:function(){var t=s.a.$m.removeTag(this.state.uuid).trim().length;return r.a.isValid(this.state.uuid)&&9<=t?"success":5<t?"warning":0<t?"error":null}},{key:"componentDidMount",value:function(){document.title=this.props.context+" - "+s.a.thispage}},{key:"toggleAdvancedOpt",value:function(){this.setState({optClicked:!this.state.optClicked})}},{key:"cancel",value:function(){var t=this;if("edit"===this.props.type){var e=location.pathname.split("/");e.splice(e.indexOf("edit"),1,"post"),this.props.history.push(e.join("/"))}else 10<this.state.content.length?s.a.confirm({message:"Cancel to write?",style:"danger",width:"170px",onYes:function(){"/"===location.pathname?t.props.history.push("/public/list"):history.back()}}):"/"===location.pathname?this.props.history.push("/public/list"):history.back()}},{key:"handleChange",value:function(t){var e,i,n;"uuid"===t.target.id&&t.target.value.length>s.a.MAXUUIDLEN||"context"===t.target.id&&t.target.value.length>s.a.MAXCONTEXTLEN||("title"===t.target.id&&(this.state.autoTitle=!1),!this.state.autoTitle&&""!==this.state.title||"content"!==t.target.id||(t.target.value.length<=s.a.MAXTITLELEN?this.state.title=t.target.value:(this.state.title=t.target.value.substr(0,s.a.MAXTITLELEN),this.state.autoTitle=!1)),this.setState((e={},i=t.target.id,n="checkbox"===t.target.getAttribute("type")?t.target.checked:t.target.value,i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e)))}},{key:"refreshUuid",value:function(){"edit"===this.props.type||this.setState({uuid:r.a.generate()})}},{key:"deleteUuid",value:function(){"edit"===this.props.type||(this.setState({uuid:""}),this.uuidinput.focus())}},{key:"deleteContext",value:function(){this.setState({context:""}),this.contextinput.focus()}},{key:"deleteTitle",value:function(){this.setState({title:""}),this.titleinput.focus()}},{key:"deleteWriter",value:function(){this.setState({writer:""}),this.writerinput.focus()}},{key:"savePost",value:function(){var e=this;if(""!==s.a.$m.removeTag(this.state.content).trim())if(""!==s.a.$m.removeTag(this.state.context).trim())if(""!==s.a.$m.removeTag(this.state.uuid).trim())if("success"===this.getValidationState()){var t=s.a.$m.removeTag(this.state.content).trim(),i=s.a.$m.removeTag(this.state.title).trim(),n={title:""===i?t.substr(0,s.a.MAXTITLELEN):i,writer:this.state.writer.trim(),content:this.state.content.trim(),date:Date.now(),isPrivate:this.state.isPrivate,isMarkdown:this.state.isMarkdown,hasComment:this.state.hasComment,uuid:s.a.user.uuid,context:this.state.context};s.a.setUser({uuid:this.state.uuid,writer:n.writer,hasComment:n.hasComment,isMarkdown:n.isMarkdown}),"edit"===this.props.type?(Object.assign(n,{key:this.state.key,viewCnt:this.state.viewCnt,likeCnt:this.state.likeCnt,commentCnt:this.state.commentCnt}),s.a.api.updatePost(n).then(function(t){"Fail"!==t.status?(0<s.a.store.getState().data.posts.length&&s.a.store.dispatch(s.a.action.updatePost(n)),e.props.history.push("/"+e.state.context+"/post/"+n.key)):s.a.alert({message:t.message,style:"danger"})})):(Object.assign(n,{key:r.a.generate(),viewCnt:0,likeCnt:0,commentCnt:0}),s.a.api.addPost(n).then(function(t){0<s.a.store.getState().data.posts.filter(function(t){return void 0===t.origin}).length&&(s.a.store.getState().data.posts[0].context!==t.output.context&&s.a.store.dispatch(s.a.action.initPosts()),s.a.store.dispatch(s.a.action.addPost(t.output))),e.props.history.push("/"+e.state.context+"/post/"+n.key)}))}else s.a.alert({message:"Invalid uuid",style:"warning",width:"152px",onClose:function(){e.uuidinput.focus()}});else s.a.alert({message:"Uuid is empty",style:"warning",width:"173px",onClose:function(){e.uuidinput.focus()}});else s.a.alert({message:"Channel is empty",style:"warning",width:"176px",onClose:function(){e.contextinput.focus()}});else s.a.alert({message:"Content is empty",style:"warning",width:"173px",onClose:function(){e.contentinput.focus()}})}},{key:"render",value:function(){var e=this,t={height:s.a.isDesktop()||navigator.userAgent.match(/android/i)?window.innerHeight-250+"px":window.innerHeight-400+"px",fontSize:this.state&&this.state.isMarkdown?"15px":"16px"},i=this.state.optClicked?"icon-folder-open-empty":"icon-folder-empty";return a.a.createElement("div",{className:"write"},a.a.createElement(l.FormGroup,{className:"form_title"},a.a.createElement(l.FormControl,{type:"text",id:"title",value:this.state.title,onChange:this.handleChange,inputRef:function(t){e.titleinput=t},placeholder:"Title.."}),this.state.title&&a.a.createElement("div",{className:"icon-cancel delete",onClick:this.deleteTitle,title:"Delete title"})),a.a.createElement(l.FormGroup,{className:"form_writer"},a.a.createElement(l.FormControl,{type:"text",className:"writer",id:"writer",value:this.state.writer,onChange:this.handleChange,inputRef:function(t){e.writerinput=t},placeholder:"Writer.."}),this.state.writer&&a.a.createElement("div",{className:"icon-cancel delete",onClick:this.deleteWriter,title:"Delete writer"}),a.a.createElement("div",{className:i+" options",onClick:this.toggleAdvancedOpt}," ","options")),this.state.optClicked&&a.a.createElement(a.a.Fragment,null,a.a.createElement(l.FormGroup,{className:"form_context"},a.a.createElement(l.FormControl,{type:"text",className:"context",id:"context",value:this.state.context,onChange:this.handleChange,inputRef:function(t){e.contextinput=t},placeholder:"Channel.."}),this.state.context&&a.a.createElement("div",{className:"icon-cancel delete",onClick:this.deleteContext,title:"Delete channel"})),a.a.createElement(l.FormGroup,{className:"form_uuid"},a.a.createElement(l.FormControl,{type:"text",className:"uuid",id:"uuid",value:this.state.uuid,disabled:"edit"===this.props.type,inputRef:function(t){e.uuidinput=t},onChange:this.handleChange,placeholder:"Uuid.."}),a.a.createElement("div",{className:"group_icon"},a.a.createElement("div",{style:"edit"===this.props.type?{cursor:"not-allowed"}:{cursor:"pointer"},className:"icon-spin3 refresh",onClick:this.refreshUuid,title:"Generate random uuid"}),this.state.uuid&&a.a.createElement("div",{style:"edit"===this.props.type?{cursor:"not-allowed"}:{cursor:"pointer"},className:"icon-cancel delete",onClick:this.deleteUuid,title:"Delete uuid"}))),a.a.createElement(l.FormGroup,{className:"form_chk"},a.a.createElement(l.Checkbox,{onChange:this.handleChange,id:"isMarkdown",checked:this.state.isMarkdown,title:"If you check markdown, you can use markdown syntax"},"Markdown"),a.a.createElement(l.Checkbox,{onChange:this.handleChange,id:"isPrivate",checked:this.state.isPrivate,title:"If you check private, the article is not exposed on the list. You can only access the URL directly. If you need to access it again, please keep the post URL separately."},"Private"),a.a.createElement(l.Checkbox,{onChange:this.handleChange,id:"hasComment",checked:this.state.hasComment,title:"If you check comment, you can get comments from others"},"Comment"))),a.a.createElement(l.FormGroup,{controlId:"content"},a.a.createElement(l.FormControl,{style:t,autoFocus:!0,inputRef:function(t){e.contentinput=t},value:this.state.content,onChange:this.handleChange,componentClass:"textarea",placeholder:"Content.."})),a.a.createElement(l.Button,{bsStyle:"success",onClick:this.savePost},a.a.createElement("i",{className:"icon-floppy"}),"Save"),a.a.createElement(l.Button,{className:"write-cancel-btn",bsStyle:"success",onClick:this.cancel},a.a.createElement("i",{className:"icon-cancel"}),"Cancel"),a.a.createElement("div",{className:"help-wrapper"},a.a.createElement("a",{href:"/public/post/BylrBddOOm"},a.a.createElement("div",{className:"icon-help-circled help"},"How to use"))))}}])&&u(t.prototype,e),i&&u(t,i),o}()}}]);