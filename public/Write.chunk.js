(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{385:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=c(n(1)),i=c(n(126)),r=n(184),s=n(185);function c(t){return t&&t.__esModule?t:{default:t}}n(619);var l=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.handleChange=o.handleChange.bind(o),o.savePost=o.savePost.bind(o),o.cancel=o.cancel.bind(o),o.state={key:"",title:"",writer:r.tp.user.writer,content:"",date:"",isPrivate:!1,isMarkdown:!1,hasComment:!0,uuid:r.tp.user.uuid},r.tp.view.Write=o,o.contextPath=o.props.context?"/"+o.props.context:"",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Component),o(e,[{key:"shouldComponentUpdate",value:function(t,e){return e!==this.state}},{key:"componentDidMount",value:function(){document.title=(this.props.context||"Anony")+" - "+r.tp.thispage}},{key:"getValidationState",value:function(){}},{key:"cancel",value:function(){this.state.content.length>10&&!confirm("Cancel to write?")||history.back()}},{key:"handleChange",value:function(t){var e={};e[t.target.id]="checkbox"===t.target.getAttribute("type")?t.target.checked:t.target.value,this.setState(e)}},{key:"savePost",value:function(){var t=this;if(""!==r.tp.$m.removeTag(this.state.content).trim()){var e=r.tp.$m.removeTag(this.state.content).trim(),n=r.tp.$m.removeTag(this.state.title).trim(),o={key:i.default.generate(),title:""===n?e.trim().substr(0,24):n,writer:this.state.writer.trim(),content:this.state.content.trim(),date:Date.now(),isPrivate:this.state.isPrivate,isMarkdown:this.state.isMarkdown,hasComment:this.state.hasComment,uuid:r.tp.user.uuid,context:this.props.context,commentCnt:0};r.tp.api.addPost(o).then(function(e){console.log("# "+e.message),r.tp.store.getState().data.posts.filter(function(t){return void 0===t.origin}).length>0&&r.tp.store.dispatch(r.tp.action.addPost(e.output)),r.tp.setUser({writer:o.writer}),t.props.history.push(t.contextPath+"/post/"+o.key)})}else alert("Content is empty")}},{key:"render",value:function(){console.log("Write 렌더링..");var t={height:r.tp.isDesktop()?window.innerHeight-170+"px":window.innerHeight-400+"px",fontSize:this.state.isMarkdown?"15px":"20px"};return a.default.createElement("div",{className:"write"},a.default.createElement("div",{className:"context"},this.props.context||"Anony"),a.default.createElement(s.FormGroup,{controlId:"title",validationState:this.getValidationState()},a.default.createElement(s.FormControl,{type:"text",value:this.state.title,onChange:this.handleChange,placeholder:"Title.."}),a.default.createElement(s.FormControl.Feedback,null)),a.default.createElement(s.FormGroup,{controlId:"writer"},a.default.createElement(s.FormControl,{type:"text",className:"writer",value:this.state.writer,onChange:this.handleChange,placeholder:"Writer.."}),a.default.createElement(s.Checkbox,{onChange:this.handleChange,id:"isMarkdown",checked:this.state.isMarkdown,title:"If you check markdown, you can use markdown syntax"},"Markdown"),a.default.createElement(s.Checkbox,{onChange:this.handleChange,id:"isPrivate",checked:this.state.isPrivate,title:"If you check private, the article is not exposed on the list. You can only access the URL directly. If you need to access it again, please keep the post URL separately."},"Private"),a.default.createElement(s.Checkbox,{onChange:this.handleChange,id:"hasComment",checked:this.state.hasComment,title:"If you check comment, you can get comments from others"},"Comment")),a.default.createElement(s.FormGroup,{controlId:"content"},a.default.createElement(s.FormControl,{style:t,autoFocus:!0,value:this.state.content,onChange:this.handleChange,componentClass:"textarea",placeholder:"Content.."})),a.default.createElement(s.Button,{bsStyle:"success",onClick:this.savePost},"Save"),a.default.createElement(s.Button,{className:"write-cancel-btn",bsStyle:"success",onClick:this.cancel},"Cancel"))}}]),e}();e.default=l},619:function(t,e,n){var o=n(620);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(125)(o,a);o.locals&&(t.exports=o.locals)},620:function(t,e,n){(t.exports=n(124)(!1)).push([t.i,'.write {\n  margin: 20px; }\n  .write div {\n    margin-bottom: 5px; }\n  .write .writer {\n    display: inline-block;\n    width: calc(100% - 265px); }\n  .write .checkbox {\n    margin: 0px 0px 0px 10px;\n    vertical-align: text-bottom;\n    display: inline-block; }\n    .write .checkbox input[type="checkbox"] {\n      -webkit-appearance: checkbox; }\n  .write input {\n    font-size: 20px; }\n  .write .write-cancel-btn {\n    margin-left: 3px; }\n',""])}}]);